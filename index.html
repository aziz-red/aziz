<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø²ÙŠØ² Ù†Øª - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root{--m:#DD2476;--s:#FF512F;--w:#fff;--t:#333;--scan:#8e44ad}
        *{box-sizing:border-box;margin:0;padding:0;font-family:'Tajawal',sans-serif}
        body{background:linear-gradient(135deg,var(--s),var(--m));min-height:100vh;display:flex;justify-content:center;align-items:center;overflow-x:hidden;padding:80px 20px 20px}
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
        .news-ticker-container{position:fixed;top:0;left:0;width:100%;background:rgba(255,255,255,.95);backdrop-filter:blur(10px);box-shadow:0 4px 15px rgba(0,0,0,.1);z-index:9999;height:50px;display:flex;align-items:center;border-bottom:3px solid var(--m)}
        .ticker-label{background:linear-gradient(to left,var(--s),var(--m));color:var(--w);padding:0 20px;height:100%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;white-space:nowrap;box-shadow:-4px 0 10px rgba(0,0,0,.1);z-index:20;gap:10px}
        .ticker-wrapper{flex:1;overflow:hidden;position:relative;height:100%;display:flex;align-items:center;background:#fff}
        .ticker-content{position:absolute;white-space:nowrap;will-change:transform;animation:m 15s linear infinite;color:var(--t);font-weight:700;font-size:.95rem;direction:rtl;width:max-content}
        .ticker-text-fix{display:inline-block;padding:0 20px}
        @keyframes m{0%{transform:translateX(-20%)}100%{transform:translateX(calc(100vw + 75%))}}
        .news-separator{margin:0 25px;color:var(--m);font-size:1.1em}

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
        .main-card{background:rgba(255,255,255,.95);width:100%;max-width:420px;border-radius:20px;padding:30px 20px;box-shadow:0 10px 40px rgba(0,0,0,.2);position:relative;text-align:center}
        .view-section{display:none;animation:f .4s ease-in-out}
        .view-section.active{display:block}
        @keyframes f{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        h2,h3{color:var(--t);margin-bottom:15px}
        .wifi-icon{width:90px;height:80px;margin:0 auto 15px;display:flex;justify-content:center;align-items:center}
        .wifi-icon svg{width:100%;height:100%}
        .subtitle{color:#666;font-size:.9rem;margin-bottom:25px}
        .input-group{position:relative;margin-bottom:15px}
        .input-field{width:100%;padding:10px 40px 10px 10px;border:2px solid #eee;border-radius:10px;font-size:1rem;outline:0;transition:.3s;background:#f9f9f9}
        .input-field:focus{border-color:var(--m);background:var(--w)}
        .input-icon{position:absolute;right:15px;top:50%;transform:translateY(-50%);width:28px;height:28px;display:flex;align-items:center;justify-content:center;pointer-events:none}
        select{width:100%;padding:12px;border-radius:10px;border:2px solid #eee;margin-bottom:15px;font-family:'Tajawal';background:var(--w);cursor:pointer}
        .btn{width:100%;padding:15px;border:none;border-radius:10px;font-weight:700;cursor:pointer;font-size:1rem;display:flex;justify-content:center;align-items:center;gap:10px;transition:transform .2s;text-decoration:none;color:var(--w);margin-bottom:10px}
        .btn:active{transform:scale(.98)}
        .btn svg{width:28px;height:28px}
        .btn-primary{background:linear-gradient(to right,var(--s),var(--m));box-shadow:0 4px 15px rgba(221,36,118,.3)}
        .btn-wa{background:#25D366;box-shadow:0 4px 15px rgba(37,211,102,.3)}
        .btn-outline{background:0 0;border:2px solid #eee;color:#555}
        .btn-scan{background:var(--scan);box-shadow:0 4px 15px rgba(142,68,173,.3);margin-bottom:15px} 
        
        /* Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loading-overlay { display:none; flex-direction:column; align-items:center; margin:20px 0; }
        .spinner{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--scan);border-radius:50%;animation:sp .8s linear infinite}
        @keyframes sp{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}

        /* Ø§Ø®ÙØ§Ø¡ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© */
        #reader { display: none; }
    </style>
</head>
<body>
    <div class="news-ticker-container">
        <div class="ticker-label">ØªÙ†ÙˆÙŠÙ‡ Ù‡Ø§Ù…</div>
        <div class="ticker-wrapper">
            <div class="ticker-content">
                <span class="ticker-text-fix">ğŸ‰ Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø´Ø¨ÙƒØ© Ø¹Ø²ÙŠØ² Ù†Øª | Ø¹Ø±ÙˆØ¶ Ù…Ù…ÙŠØ²Ø© ÙˆØ£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§ÙØ³Ø© ÙˆØ³Ø±Ø¹Ø§Øª Ø¹Ø§Ù„ÙŠØ©! <span class="news-separator">|</span> ğŸ’¡ Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ: 739367154</span>
            </div>
        </div>
    </div>

    <div class="main-card">
        <div id="view-login" class="view-section active">
            <div class="wifi-icon">
                <svg viewBox="0 0 12 12" fill="#ff512f"><path d="M7 8c-1.1 0-2 1-2 2s1 2 2 2 2-1 2-2l0 0C9 8.9 8.1 8 7 8M7 4l0 2c2 0 4.1 2 4.1 4l2 0C13 7 9.9 4 7 4M17 10l-2 0c0-4-4.1-8-8-8l0-2C12 0 17 4 17 10" transform="translate(-5 -0.5) scale(0.9)"/></svg>
            </div>
            <h2>Ø£Ù…Ø³ÙŠØ© Ø³Ø¹ÙŠØ¯Ø©</h2>
            <p class="subtitle">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù‚ØµÙˆÙ‰ ğŸš€</p>
            
            <form onsubmit="handleLogin(event)">
                <div class="input-group">
                    <input type="tel" id="cardInput" class="input-field" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙƒØ±Øª (Ù…Ø«Ø§Ù„: 7166)" required>
                    <div class="input-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ff512f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 19H6.2c-1.1 0-1.7 0-2.1-.2a2 2 0 01-.9-.9C3 17.5 3 16.9 3 15.8V8.2c0-1.1 0-1.7.2-2.1a2 2 0 01.9-.9c.4-.2 1-.2 2.1-.2H17.8c1.1 0 1.7 0 2.1.2a2 2 0 01.9.9c.2.4.2 1 .2 2.1V12M3 9h18M18 21v-6M21 18l-6 0"/></svg>
                    </div>
                </div>
                
                <input type="file" id="nativeCameraInput" accept="image/*" capture="environment" style="display:none">
                
                <button type="button" onclick="triggerNativeCamera()" class="btn btn-scan">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
                    ØªØµÙˆÙŠØ± Ø§Ù„ÙƒØ±Øª Ø¨ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù‡Ø§ØªÙ
                </button>

                <div id="loading-overlay">
                    <div class="spinner"></div>
                    <p style="font-size:0.8rem; margin-top:10px; color:var(--scan)">Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©...</p>
                </div>

                <p id="errorText" class="error-msg" style="color:#ff4757; font-size:0.85rem; display:none; margin-bottom:10px;">Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ÙˆØ§Ø¶Ø­ Ø£Ùˆ Ø®Ø§Ø·Ø¦! Ø­Ø§ÙˆÙ„ Ø§Ù„ØªØµÙˆÙŠØ± Ø¨ÙˆØ¶ÙˆØ­.</p>

                <select id="speedSelectMain">
                    <option>ğŸš€ Ø³Ø±Ø¹Ø© Ù…ÙØªÙˆØ­Ø© (VIP)</option>
                    <option>ğŸ® Ø³Ø±Ø¹Ø© Ø£Ù„Ø¹Ø§Ø¨ (Gaming)</option>
                    <option>ğŸ’° Ø³Ø±Ø¹Ø© Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©</option>
                </select>

                <button type="submit" class="btn btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </form>

            <div class="secondary-actions">
                <button onclick="switchView('branches')" class="btn btn-outline btn-small">Ø§Ù„ÙØ±ÙˆØ¹ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±</button>
                <button onclick="openWhatsApp()" class="btn btn-wa btn-small">ÙˆØ§ØªØ³Ø§Ø¨</button>
            </div>
        </div>

        <div id="view-success" class="view-section">
            <div class="success-icon"><svg viewBox="0 0 512 512" fill="#2ecc71"><path d="M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM227.3 387.3l184-184c6.2-6.2 6.2-16.4 0-22.6l-22.6-22.6c-6.2-6.2-16.4-6.2-22.6 0L216 308.1l-70.1-70.1c-6.2-6.2-16.4-6.2-22.6 0l-22.6 22.6c-6.2 6.2-6.2 16.4 0 22.6l104 104c6.2 6.2 16.4 6.2 22.6 0z"/></svg></div>
            <h2 style="color:#2ecc71">ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!</h2>
        </div>

        <div id="view-branches" class="view-section">
            <h3>Ø§Ù„ÙØ±ÙˆØ¹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª</h3>
            <div class="list-item"><span>Ø¨Ø§Ù‚Ø© Ø³Ø§Ø¹Ø©</span> <span class="price-tag">100 Ø±ÙŠØ§Ù„</span></div>
            <button onclick="switchView('login')" class="btn btn-outline">Ø±Ø¬ÙˆØ¹</button>
        </div>
    </div>

    <div id="reader"></div>

    <script>
        const VALID_CARDS=['7166','0000'], WHATSAPP_NUMBER='967739367154';
        const el=i=>document.getElementById(i);
        const html5QrCode = new Html5Qrcode("reader");

        function switchView(id){
            document.querySelectorAll('.view-section').forEach(e=>e.classList.remove('active'));
            el('view-'+id).classList.add('active');
        }

        const openWhatsApp=()=>window.open(`https://wa.me/${WHATSAPP_NUMBER}`,'_blank');

        // Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        function triggerNativeCamera() {
            el('nativeCameraInput').click();
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø·Ù‡Ø§
        el('nativeCameraInput').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            el('loading-overlay').style.display = 'flex';
            el('errorText').style.display = 'none';

            try {
                // Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ù„ØªÙ‚Ø·
                const decodedText = await html5QrCode.scanFile(file, true);
                el('cardInput').value = decodedText;
                el('loading-overlay').style.display = 'none';
                
                // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­
                handleLogin();
            } catch (err) {
                el('loading-overlay').style.display = 'none';
                el('errorText').style.display = 'block';
                console.error("QR Scan Error:", err);
            }
        });

        function handleLogin(e){
            if(e) e.preventDefault();
            const i=el('cardInput'), v=i.value;
            if(v){ // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø´Ø±Ø· VALID_CARDS.includes(v) Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ÙŠØ¯ ØªÙ‚ÙŠÙŠØ¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
                localStorage.setItem('userCard',v);
                switchView('success');
            }
        }

        window.onload=()=>{
            const c=localStorage.getItem('userCard');
            if(c) {
                el('cardInput').value = c;
            }
        };
    </script>
</body>
</html>

